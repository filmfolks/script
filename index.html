<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test Fountain</title>
</head>
<body>
  <textarea id="editor" rows="8" cols="50">FADE IN:</textarea>
  <div id="preview"><em>Preview will appear here...</em></div>

  <script src="https://unpkg.com/fountain-js@1.9.1/dist/fountain.js"></script>
  <script>
    console.log('Fountain object:', typeof Fountain);
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');
    if (typeof Fountain === 'undefined') {
      preview.innerHTML = '<span style="color:red">Fountain failed to load</span>';
    } else {
      const f = new Fountain();
      function render() {
        const parsed = f.parse(editor.value, true);
        preview.innerHTML = `<div class="screenplay-preview">${parsed.html.script}</div>`;
      }
      editor.addEventListener('input', render);
      render();
    }
  </script>
</body>
</html>
